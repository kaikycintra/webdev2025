<!DOCTYPE html>
<html lang="pt">
<head>
    <title>Aula 5</title>
    <style>
        /* Estilo para blocos de código */
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        code {
            padding: 2px 4px;
            border-radius: 4px;
            font-family: monospace;
        }
        pre {
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
        .note {
            background-color: #e7f5ff;
            border-left: 4px solid #4dabf7;
            padding: 10px;
            margin: 10px 0;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        img {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>

<h1>Aula 5</h1>

<ul>
  <li><a href="#introduction">Introdução</a></li>
  <li><a href="#javascript">JavaScript</a></li>
  <li><a href="#events">Eventos</a></li>
  <li><a href="#variables">Variáveis</a></li>
  <li><a href="#queryselector">querySelector</a></li>
  <li><a href="#dom-manipulation">Manipulação da DOM</a>
    <ul>
      <li><a href="#javascript-console">Console do JavaScript</a></li>
      <li><a href="#arrow-functions">Arrow Functions</a></li>
      <li><a href="#todo-list">Lista de Tarefas</a></li>
    </ul>
  </li>
  <li><a href="#intervals">Intervalos</a></li>
  <li><a href="#local-storage">Local Storage</a></li>
  <li><a href="#apis">APIs</a>
    <ul>
      <li><a href="#javascript-objects">Objetos JavaScript</a></li>
      <li><a href="#currency-exchange">Câmbio de Moedas</a></li>
    </ul>
  </li>
</ul>

<h2 id="introduction">Introdução</h2>

<ul>
  <li>Até agora, discutimos como construir páginas web simples usando HTML e CSS, e como usar Git e GitHub para acompanhar mudanças no nosso código e colaborar com outros. Também nos familiarizamos com a linguagem Python, começamos a usar Django para criar aplicações web e aprendemos a usar modelos Django para armazenar informações em nossos sites.</li>
  <li>Hoje, introduziremos uma nova linguagem de programação: JavaScript.</li>
</ul>

<h2 id="javascript">JavaScript</h2>

<p>Vamos começar revisitando um diagrama de algumas aulas atrás:</p>

<p><img src="static5/client_server.png" alt="Diagrama Cliente-Servidor"></p>

<p>Lembre-se que na maioria das interações online, temos um cliente/usuário que envia uma Requisição HTTP para um servidor, que envia de volta uma Resposta HTTP. Todo o código Python que escrevemos até agora usando Django foi executado no servidor. JavaScript nos permitirá executar código no lado do cliente, significando que nenhuma interação com o servidor é necessária enquanto ele está rodando, permitindo que nossos sites se tornem muito mais interativos.</p>

<p>Para adicionar JavaScript à nossa página, podemos adicionar uma par de tags <code>&lt;script&gt;</code> em algum lugar do nosso HTML. Usamos tags <code>&lt;script&gt;</code> para sinalizar ao navegador que qualquer coisa que escrevemos entre elas é código JavaScript que queremos executar quando um usuário visita nosso site. Nosso primeiro programa pode se parecer com isso:</p>

<pre><code>alert('Olá, kaiqui!');
</code></pre>

<p>A função <code>alert</code> em JavaScript exibe uma mensagem ao usuário que pode então ser dispensada. Para mostrar onde isso se encaixaria em um documento HTML real, aqui está um exemplo de uma página simples com algum JavaScript:</p>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="pt"&gt;
    &lt;head&gt;
        &lt;title&gt;Olá&lt;/title&gt;
        &lt;script&gt;
            alert('Olá, kaiqui!');
        &lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Olá!&lt;/h1&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p><img src="static5/alert0.png" alt="alerta"></p>

<h2 id="events">Eventos</h2>

<p>Uma característica do JavaScript que o torna útil para programação web é seu suporte a <a href="https://medium.com/@vsvaibhav2016/introduction-to-event-driven-programming-28161b79c223">Programação Orientada a Eventos</a>.</p>

<p>Programação Orientada a Eventos é um paradigma que se concentra na detecção de eventos e ações que devem ser tomadas quando um evento é detectado.</p>

<p>Um evento pode ser quase qualquer coisa incluindo um botão sendo clicado, o cursor sendo movido, uma resposta sendo digitada ou uma página sendo carregada. Quase tudo que um usuário faz para interagir com uma página web pode ser considerado um evento. Em JavaScript, usamos <a href="https://www.w3schools.com/js/js_htmldom_eventlistener.asp">Ouvintes de Evento</a> que esperam por certos eventos ocorrerem e então executam algum código.</p>

<p>Vamos começar transformando nosso JavaScript de antes em uma <a href="https://www.w3schools.com/js/js_functions.asp">função</a> chamada <code>ola</code>:</p>

<pre><code>function ola() {
    alert('Olá, mundo!')
}
</code></pre>

<p>Agora, vamos fazer com que esta função seja executada quando um botão for clicado. Para isso, criaremos um botão HTML em nossa página com um atributo <code>onclick</code>, que dá ao navegador instruções sobre o que deve acontecer quando o botão é clicado:</p>

<pre><code>&lt;button onclick="ola()"&gt;Clique Aqui&lt;/button&gt;
</code></pre>

<p>Estas mudanças nos permitem esperar para executar partes do nosso código JavaScript até que certo evento ocorra.</p>

<h2 id="variables">Variáveis</h2>

<p>JavaScript é uma linguagem de programação como Python, C ou qualquer outra linguagem com que você já trabalhou, significando que tem muitas das mesmas características incluindo variáveis. Há três palavras-chave que podemos usar para atribuir valores em JavaScript:</p>
<ul>
  <li><code>var</code>: usado para definir uma variável globalmente</li>
</ul>

<pre><code>var idade = 20;
</code></pre>

<ul>
  <li><code>let</code>: usado para definir uma variável com escopo limitado ao bloco atual como uma função ou loop</li>
</ul>

<pre><code>let contador = 1;
</code></pre>

<ul>
  <li><code>const</code>: usado para definir um valor que não mudará</li>
</ul>

<pre><code>const PI = 3.14;
</code></pre>

<p>Para um exemplo de como podemos usar uma variável, vamos ver uma página que mantém um contador:</p>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="pt"&gt;
    &lt;head&gt;
        &lt;title&gt;Contador&lt;/title&gt;
        &lt;script&gt;
            let contador = 0;
            function contar() {
                contador++;
                alert(contador);
            }
        &lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Olá!&lt;/h1&gt;
        &lt;button onclick="contar()"&gt;Contar&lt;/button&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p><img src="static5/count.gif" alt="contando"></p>

<h2 id="queryselector">querySelector</h2>

<p>Além de nos permitir mostrar mensagens através de alertas, JavaScript também nos permite mudar elementos na página. Para fazer isso, devemos primeiro introduzir uma função chamada <code>document.querySelector</code>. Esta função procura e retorna elementos do DOM. Por exemplo, usaríamos:</p>

<pre><code>let cabecalho = document.querySelector('h1');
</code></pre>

<p>para extrair um cabeçalho. Então, para manipular o elemento que encontramos, podemos mudar sua propriedade <code>innerHTML</code>:</p>

<pre><code>cabecalho.innerHTML = `Adeus!`;
</code></pre>

<p>Assim como em Python, também podemos aproveitar <a href="https://www.w3schools.com/js/js_if_else.asp">condições</a> em JavaScript. Por exemplo, digamos que ao invés de sempre mudar nosso cabeçalho para <code>Adeus!</code>, queremos alternar entre <code>Olá!</code> e <code>Adeus!</code>. Nossa página poderia então se parecer com a abaixo. Note que em JavaScript, usamos <code>===</code> como uma comparação mais forte entre dois itens que também verifica que os objetos são do mesmo tipo. Geralmente queremos usar <code>===</code> sempre que possível.</p>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="pt"&gt;
    &lt;head&gt;
        &lt;title&gt;Contador&lt;/title&gt;
        &lt;script&gt;
            function ola() {
                const cabecalho = document.querySelector('h1');
                if (cabecalho.innerHTML === 'Olá!') {
                    cabecalho.innerHTML = 'Adeus!';
                }
                else {
                    cabecalho.innerHTML = 'Olá!';
                }
            }
        &lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Olá!&lt;/h1&gt;
        &lt;button onclick="ola()"&gt;Clique Aqui&lt;/button&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p><img src="static5/toggle.gif" alt="alternar"></p>

<h2 id="dom-manipulation">Manipulação da DOM</h2>

<p>Vamos usar essa ideia de manipulação da DOM para melhorar nossa página de contador:</p>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="pt"&gt;
    &lt;head&gt;
        &lt;title&gt;Contador&lt;/title&gt;
        &lt;script&gt;
            let contador = 0;
            function contar() {
                contador++;
                document.querySelector('h1').innerHTML = contador;
            }
        &lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;0&lt;/h1&gt;
        &lt;button onclick="contar()"&gt;Contar&lt;/button&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p><img src="static5/count2.gif" alt="contador 2"></p>

<p>Podemos tornar esta página ainda mais interessante exibindo um alerta toda vez que o contador chegar a um múltiplo de dez. Neste alerta, vamos formatar uma string para personalizar a mensagem, o que em JavaScript podemos fazer usando <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals">template literals</a>. Template literals requerem que haja crases (<code>`</code>) em torno de toda a expressão e um $ e chaves em torno de qualquer substituição. Por exemplo, vamos mudar nossa função contar:</p>

<pre><code>function contar() {
    contador++;
    document.querySelector('h1').innerHTML = contador;
    
    if (contador % 10 === 0) {
        alert(`Contagem está agora em ${contador}`)
    }
}
</code></pre>

<p><img src="static5/count3.gif" alt="contador com alerta"></p>

<p>Agora, vamos ver algumas maneiras de melhorar o design desta página. Primeiro, assim como tentamos evitar estilização inline com CSS, queremos evitar JavaScript inline sempre que possível. Podemos fazer isso em nosso exemplo de contador adicionando uma linha de script que muda o atributo <code>onclick</code> de um botão na página, e removendo o atributo <code>onclick</code> de dentro da tag <code>button</code>.</p>

<pre><code>document.querySelector('button').onclick = contar;
</code></pre>

<p>Uma coisa a notar sobre o que acabamos de fazer é que não estamos chamando a função <code>contar</code> adicionando parênteses depois, mas apenas nomeando a função. Isso especifica que só queremos chamar esta função quando o botão for clicado. Isso funciona porque, como Python, JavaScript suporta programação funcional, então funções podem ser tratadas como valores em si mesmas.</p>

<p>Esta mudança sozinha não é suficiente, como podemos ver ao inspecionar a página e olhar o console do navegador:</p>

<p><img src="static5/error0.png" alt="console de erro"></p>

<p>Este erro apareceu porque quando JavaScript procurou por um elemento usando <code>document.querySelector('button')</code>, não encontrou nada. Isso porque leva um pequeno tempo para a página carregar, e nosso código JavaScript rodou antes do botão ter sido renderizado. Para contornar isso, podemos especificar que o código só será executado depois que a página tiver carregado usando a função <a href="https://www.w3schools.com/jsref/met_document_addeventlistener.asp">addEventListener</a>. Esta função recebe dois argumentos:</p>
<ol>
  <li>Um evento para ouvir (ex: <code>'click'</code>)</li>
  <li>Uma função para executar quando o evento for detectado (ex: <code>ola</code> de antes)</li>
</ol>

<p>Podemos usar a função para só executar o código uma vez que todo o conteúdo tiver carregado:</p>

<pre><code>document.addEventListener('DOMContentLoaded', function() {
    // Algum código aqui
});
</code></pre>

<p>No exemplo acima, usamos uma função <a href="https://www.w3schools.com/js/js_function_definition.asp">anônima</a>, que é uma função que nunca recebe um nome. Juntando tudo isso, nosso JavaScript agora fica assim:</p>

<pre><code>let contador = 0;

function contar() {
    contador++;
    document.querySelector('h1').innerHTML = contador;
    
    if (contador % 10 === 0) {
        alert(`Contagem está agora em ${contador}`)
    }
}

document.addEventListener('DOMContentLoaded', function() {
    document.querySelector('button').onclick = contar;
});
</code></pre>

<p>Outra maneira de melhorar nosso design é movendo nosso JavaScript para um arquivo separado. A maneira como fazemos isso é muito similar a como colocamos nosso CSS em um arquivo separado para estilização:</p>
<ol>
  <li>Escreva todo seu código JavaScript em um arquivo separado terminando em <code>.js</code>, talvez <code>index.js</code>.</li>
  <li>Adicione um atributo <code>src</code> à tag <code>&lt;script&gt;</code> que aponta para este novo arquivo.</li>
</ol>

<p>Para nossa página de contador, poderíamos ter um arquivo chamado <code>contador.html</code> que se parece com isso:</p>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="pt"&gt;
    &lt;head&gt;
        &lt;title&gt;Contador&lt;/title&gt;
        &lt;script src="contador.js"&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;0&lt;/h1&gt;
        &lt;button&gt;Contar&lt;/button&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>E um arquivo chamado <code>contador.js</code> que se parece com isso:</p>

<pre><code>let contador = 0;
            
function contar() {
    contador++;
    document.querySelector('h1').innerHTML = contador;
    
    if (contador % 10 === 0) {
        alert(`Contagem está agora em ${contador}`)
    }
}

document.addEventListener('DOMContentLoaded', function() {
    document.querySelector('button').onclick = contar;
});
</code></pre>

<p>Ter JavaScript em um arquivo separado é útil por várias razões:</p>
<ul>
  <li>Apelo visual: Nossos arquivos HTML e JavaScript individuais se tornam mais legíveis.</li>
  <li>Acesso entre arquivos HTML: Agora podemos ter múltiplos arquivos HTML que compartilham o mesmo JavaScript.</li>
  <li>Colaboração: Podemos agora facilmente ter uma pessoa trabalhando no JavaScript enquanto outra trabalha no HTML.</li>
  <li>Importação: Podemos importar bibliotecas JavaScript que outras pessoas já escreveram. Por exemplo, o <a href="https://getbootstrap.com/docs/4.5/getting-started/introduction/#js">Bootstrap</a> tem sua própria biblioteca JavaScript que você pode incluir para tornar seu site mais interativo.</li>
</ul>

<p>Vamos começar outro exemplo de uma página que pode ser um pouco mais interativa. Abaixo, criaremos uma página onde um usuário pode digitar seu nome para receber uma saudação personalizada.</p>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="pt"&gt;
&lt;head&gt;
    &lt;title&gt;Olá&lt;/title&gt;
    &lt;script&gt;
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelector('form').onsubmit = function() {
                const nome = document.querySelector('#nome').value;
                alert(`Olá, ${nome}`);
            };
        });
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form&gt;
        &lt;input autofocus id="nome" placeholder="Nome" type="text"&gt;
        &lt;input type="submit"&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p><img src="static5/greet.gif" alt="Demonstração de Saudação"></p>

<p>Algumas notas sobre a página acima:</p>
<ul>
  <li>Usamos o campo <code>autofocus</code> no input <code>nome</code> para indicar que o cursor deve ser posicionado dentro desse input assim que a página carregar.</li>
  <li>Usamos <code>#nome</code> dentro de <code>document.querySelector</code> para encontrar um elemento com um <code>id</code> de <code>nome</code>. Podemos usar todos os mesmos seletores nesta função que poderíamos em CSS.</li>
  <li>Usamos o atributo <code>value</code> de um campo de input para encontrar o que está atualmente digitado.</li>
</ul>

<p>Podemos fazer mais do que apenas adicionar HTML à nossa página usando JavaScript, também podemos mudar a estilização de uma página! Na página abaixo, usamos botões para mudar a cor do nosso cabeçalho.</p>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="pt"&gt;
&lt;head&gt;
     &lt;title&gt;Cores&lt;/title&gt;
     &lt;script&gt;
         document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('button').forEach(function(botao) {
                botao.onclick = function() {
                    document.querySelector("#ola").style.color = botao.dataset.cor;
                }
            });
         });
     &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1 id="ola"&gt;Olá&lt;/h1&gt;
    &lt;button data-cor="red"&gt;Vermelho&lt;/button&gt;
    &lt;button data-cor="blue"&gt;Azul&lt;/button&gt;
    &lt;button data-cor="green"&gt;Verde&lt;/button&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p><img src="static5/colors.gif" alt="Demonstração de Cores"></p>

<p>Algumas notas sobre a página acima:</p>
<ul>
  <li>Mudamos o estilo de um elemento usando o atributo <code>style.ALGO</code>.</li>
  <li>Usamos o atributo <code>data-ALGO</code> para atribuir dados a um elemento HTML. Podemos depois acessar esses dados em JavaScript usando a propriedade <code>dataset</code> do elemento.</li>
  <li>Usamos a função <code>querySelectorAll</code> para obter uma <a href="https://www.w3schools.com/js/js_htmldom_nodelist.asp">Node List</a> (similar a uma lista Python ou um <a href="https://www.w3schools.com/js/js_arrays.asp">array</a> JavaScript) com todos os elementos que correspondem à query.</li>
  <li>A função <a href="https://www.w3schools.com/jsref/jsref_foreach.asp">forEach</a> em JavaScript recebe outra função, e aplica essa função a cada elemento em uma lista ou array.</li>
</ul>

<h3 id="javascript-console">Console do JavaScript</h3>

<p>O console é uma ferramenta útil para testar pequenos pedaços de código e depurar. Você pode escrever e executar código JavaScript no console, que pode ser encontrado inspecionando elemento no seu navegador e então clicando em <code>console</code>. (O processo exato pode variar de navegador para navegador.) Uma ferramenta útil para depuração é imprimir no console, o que você pode fazer usando a função <code>console.log</code>. Por exemplo, na página <code>cores.html</code> acima, posso adicionar a seguinte linha:</p>

<pre><code>console.log(document.querySelectorAll('button'));
</code></pre>

<p>O que nos dá isso no console:</p>

<p><img src="static5/consoleList.png" alt="node list"></p>

<h3 id="arrow-functions">Arrow Functions</h3>

<p>Além da notação tradicional de função que já vimos, JavaScript agora nos dá a habilidade de usar <a href="https://www.w3schools.com/js/js_arrow_function.asp">Arrow Functions</a> onde temos uma entrada (ou parênteses quando não há entrada) seguido por <code>=&gt;</code> seguido por algum código a ser executado. Por exemplo, podemos alterar nosso script acima para usar uma arrow function anônima:</p>

<pre><code>document.addEventListener('DOMContentLoaded', () =&gt; {
    document.querySelectorAll('button').forEach(botao =&gt; {
        botao.onclick = () =&gt; {
            document.querySelector("#ola").style.color = botao.dataset.cor;
        }
    });
});
</code></pre>

<p>Também podemos ter funções nomeadas que usam arrows, como nesta reescrita da função contar:</p>

<pre><code>contar = () =&gt; {
    contador++;
    document.querySelector('h1').innerHTML = contador;
    
    if (contador % 10 === 0) {
        alert(`Contagem está agora em ${contador}`)
    }
}
</code></pre>
<p>Para ter uma ideia sobre outros eventos que podemos usar, vejamos como implementar nosso seletor de cores usando um menu dropdown ao invés de três botões separados. Podemos detectar mudanças em um elemento select usando o atributo <code>onchange</code>. Em JavaScript, <code>this</code> é uma palavra-chave que muda com base no contexto em que é usada. No caso de um manipulador de eventos, <code>this</code> refere-se ao objeto que acionou o evento.</p>

    <pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="pt"&gt;
    &lt;head&gt;
        &lt;title&gt;Cores&lt;/title&gt;
        &lt;script&gt;
            document.addEventListener('DOMContentLoaded', function() {
                document.querySelector('select').onchange = function() {
                    document.querySelector('#ola').style.color = this.value;
                }
            });
        &lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1 id="ola"&gt;Olá&lt;/h1&gt;
        &lt;select&gt;
            &lt;option value="black"&gt;Preto&lt;/option&gt;
            &lt;option value="red"&gt;Vermelho&lt;/option&gt;
            &lt;option value="blue"&gt;Azul&lt;/option&gt;
            &lt;option value="green"&gt;Verde&lt;/option&gt;
        &lt;/select&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>

<p><img src="static5/colorList.gif" alt="Lista de Cores"></p>


<p>Há muitos outros <a href="https://www.w3schools.com/js/js_events.asp">eventos</a> que podemos detectar em JavaScript incluindo os comuns abaixo:</p>
<ul>
  <li><code>onclick</code></li>
  <li><code>onmouseover</code></li>
  <li><code>onkeydown</code></li>
  <li><code>onkeyup</code></li>
  <li><code>onload</code></li>
  <li><code>onblur</code></li>
  <li>...</li>
</ul>

<h3 id="todo-list">Lista de Tarefas</h3>

<p>Para juntar algumas das coisas que aprendemos nesta aula, vamos trabalhar em fazer uma lista de tarefas inteiramente em JavaScript. Começaremos escrevendo o layout HTML da página. Note abaixo como deixamos espaço para uma lista não ordenada, mas ainda não adicionamos nada a ela. Também note que adicionamos um link para <code>tarefas.js</code> onde escreveremos nosso JavaScript.</p>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="pt"&gt;
    &lt;head&gt;
        &lt;title&gt;Tarefas&lt;/title&gt;
        &lt;script src="tarefas.js"&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Tarefas&lt;/h1&gt;
        &lt;ul id="tarefas"&gt;&lt;/ul&gt;
        &lt;form&gt;
            &lt;input id="tarefa" placeholder = "Nova Tarefa" type="text"&gt;
            &lt;input id="submit" type="submit"&gt;
        &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Agora, aqui está nosso código que podemos manter em <code>tarefas.js</code>. Algumas notas sobre o que você verá abaixo:</p>
<ul>
  <li>Este código é ligeiramente diferente do código da aula. Aqui, só procuramos por nosso botão de submit e campo de input de tarefa uma vez no início e armazenamos esses dois valores nas variáveis <code>submit</code> e <code>novaTarefa</code>.</li>
  <li>Podemos habilitar/desabilitar um botão configurando seu atributo <code>disabled</code> para <code>false</code>/<code>true</code>.</li>
  <li>Em JavaScript, usamos <code>.length</code> para encontrar o comprimento de objetos como strings e arrays.</li>
  <li>No final do script, adicionamos a linha <code>return false</code>. Isso previne o envio padrão do formulário que envolve ou recarregar a página atual ou redirecionar para uma nova.</li>
  <li>Em JavaScript, podemos criar elementos HTML usando a função <a href="https://www.w3schools.com/jsref/met_document_createelement.asp">createElement</a>. Podemos então adicionar esses elementos ao DOM usando a função <code>append</code>.</li>
</ul>

<pre><code>// Esperar a página carregar
document.addEventListener('DOMContentLoaded', function() {

    // Selecionar o botão de submit e input para usar depois
    const submit = document.querySelector('#submit');
    const novaTarefa = document.querySelector('#tarefa');

    // Desabilitar botão de submit por padrão:
    submit.disabled = true;

    // Ouvir por input sendo digitado no campo
    novaTarefa.onkeyup = () =&gt; {
        if (novaTarefa.value.length &gt; 0) {
            submit.disabled = false;
        }
        else {
            submit.disabled = true;
        }
    }

    // Ouvir por envio de formulário
    document.querySelector('form').onsubmit = () =&gt; {

        // Encontrar a tarefa que o usuário acabou de enviar
        const tarefa = novaTarefa.value;

        // Criar um item de lista para a nova tarefa e adicionar a tarefa a ele
        const li = document.createElement('li');
        li.innerHTML = tarefa;

        // Adicionar novo elemento à nossa lista não ordenada:
        document.querySelector('#tarefas').append(li);

        // Limpar campo de input:
        novaTarefa.value = '';

        // Desabilitar o botão de submit novamente:
        submit.disabled = true;

        // Parar o formulário de enviar
        return false;
    }
});
</code></pre>

<p><img src="static5/tasks.gif" alt="Demonstração de Tarefas"></p>

<h2 id="intervals">Intervalos</h2>

<p>Além de especificar que funções rodam quando um evento é acionado, também podemos configurar funções para rodar após um certo tempo. Por exemplo, vamos voltar ao script da nossa página de contador, e adicionar um intervalo para que mesmo se o usuário não clicar em nada, o contador incremente a cada segundo. Para fazer isso, usamos a função <a href="https://www.w3schools.com/jsref/met_win_setinterval.asp">setInterval</a>, que recebe como argumento uma função a ser executada, e um tempo (em milissegundos) entre execuções da função.</p>

<pre><code>let contador = 0;
            
function contar() {
    contador++;
    document.querySelector('h1').innerHTML = contador;
}

document.addEventListener('DOMContentLoaded', function() {
    document.querySelector('button').onclick = contar;

    setInterval(contar, 1000);
});
</code></pre>

<p><img src="static5/count4.gif" alt="contador automático"></p>

<h2 id="local-storage">Local Storage</h2>

<p>Uma coisa a notar sobre todos os nossos sites até agora é que toda vez que recarregamos a página, toda nossa informação é perdida. A cor do cabeçalho volta para preto, o contador volta para 0, e todas as tarefas são apagadas. Às vezes isso é o que pretendemos, mas outras vezes vamos querer poder armazenar informação que podemos usar quando um usuário retornar ao site.</p>

<p>Uma maneira que podemos fazer isso é usando <a href="https://www.w3schools.com/jsref/prop_win_localstorage.asp">Local Storage</a>, ou armazenando informação no navegador do usuário que podemos acessar depois. Esta informação é armazenada como um conjunto de pares chave-valor, quase como um dicionário Python. Para usar local storage, empregaremos duas funções chave:</p>
<ul>
  <li><code>localStorage.getItem(chave)</code>: Esta função procura por uma entrada no local storage com uma dada chave, e retorna o valor associado a essa chave.</li>
  <li><code>localStorage.setItem(chave, valor)</code>: Esta função configura uma entrada no local storage, associando a chave com um novo valor.</li>
</ul>

<p>Vamos ver como podemos usar essas novas funções para atualizar nosso contador! No código abaixo,</p>

<pre><code>// Verificar se já existe um valor no local storage
if (!localStorage.getItem('contador')) {

    // Se não, configurar o contador para 0 no local storage
    localStorage.setItem('contador', 0);
}
            
function contar() {
    // Recuperar valor do contador do local storage
    let contador = localStorage.getItem('contador');

    // atualizar contador
    contador++;
    document.querySelector('h1').innerHTML = contador;

    // Armazenar contador no local storage
    localStorage.setItem('contador', contador);
}

document.addEventListener('DOMContentLoaded', function() {
    // Configurar cabeçalho para o valor atual dentro do local storage
    document.querySelector('h1').innerHTML = localStorage.getItem('contador');
    document.querySelector('button').onclick = contar;
});
</code></pre>

<h2 id="apis">APIs</h2>

<h3 id="javascript-objects">Objetos JavaScript</h3>

<p>Um <a href="https://www.w3schools.com/js/js_objects.asp">Objeto JavaScript</a> é muito similar a um dicionário Python, pois nos permite armazenar pares chave-valor. Por exemplo, eu poderia criar um Objeto JavaScript representando Harry Potter:</p>

<pre><code>let pessoa = {
    primeiro: 'Harry',
    ultimo: 'Potter'
};
</code></pre>

<p>Posso então acessar ou mudar partes deste objeto usando tanto notação de colchetes quanto de ponto:</p>

<p><img src="static5/console.png" alt="Harry Potter"></p>

<p>Uma maneira em que Objetos JavaScript são realmente úteis é em transferir dados de um site para outro, particularmente quando usando <a href="https://www.mulesoft.com/resources/api/what-is-an-api">APIs</a></p>

<p>Uma API, ou Interface de Programação de Aplicações, é uma forma estruturada de comunicação entre duas aplicações diferentes.</p>

<p>Por exemplo, podemos querer que nossa aplicação obtenha informação do Google Maps, Amazon ou algum serviço de clima. Podemos fazer isso fazendo chamadas para a API de um serviço, que retornará dados estruturados para nós, frequentemente em forma de <a href="https://www.w3schools.com/js/js_json_intro.asp">JSON</a> (JavaScript Object Notation). Por exemplo, um voo em forma JSON pode se parecer com isso:</p>

<pre><code>{
    "origem": "Nova York",
    "destino": "Londres",
    "duração": 415
}
</code></pre>

<p>Os valores dentro de um JSON não precisam ser apenas strings e números como no exemplo acima. Também podemos armazenar listas, ou até outros Objetos JavaScript:</p>

<pre><code>{
    "origem": {
        "cidade": "Nova York",
        "código": "JFK"
    },
    "destino": {
        "cidade": "Londres",
        "código": "LHR"
    },
    "duração": 415
}
</code></pre>

<h3 id="currency-exchange">Câmbio de Moedas</h3>

<p>Para mostrar como podemos usar APIs em nossas aplicações, vamos trabalhar em construir uma aplicação onde podemos encontrar taxas de câmbio entre duas moedas. Durante o exercício, estaremos usando a <a href="https://exchangeratesapi.io">API de Câmbio do Banco Central Europeu</a>. Ao visitar seu website, você verá a documentação da API, que geralmente é um bom lugar para começar quando você deseja usar uma API. Podemos testar esta API visitando a URL: <a href="https://api.exchangeratesapi.io/latest?base=USD">https://api.exchangeratesapi.io/latest?base=USD</a>. Quando você visitar esta página, verá a taxa de câmbio entre o Dólar Americano e muitas outras moedas, escrito em forma JSON. Você também pode mudar o parâmetro GET na URL de <code>USD</code> para qualquer outro código de moeda para mudar as taxas que você obtém.</p>

<p>Vamos ver como implementar esta API em uma aplicação criando um novo arquivo HTML chamado <code>moeda.html</code> e linká-lo a um arquivo JavaScript mas deixar o corpo vazio:</p>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="pt"&gt;
    &lt;head&gt;
        &lt;title&gt;Câmbio de Moedas&lt;/title&gt;
        &lt;script src="moeda.js"&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Agora, usaremos algo chamado <a href="https://www.w3schools.com/js/js_ajax_intro.asp">AJAX</a>, ou JavaScript Assíncrono e XML, que nos permite acessar informação de páginas externas mesmo depois que nossa página carregou. Para fazer isso, usaremos a função <a href="https://javascript.info/fetch">fetch</a> que nos permitirá enviar uma Requisição HTTP. A função <code>fetch</code> retorna uma <a href="https://web.dev/promises/">promise</a>. Não falaremos sobre os detalhes do que é uma promise aqui, mas podemos pensar nela como um valor que virá em algum ponto, mas não necessariamente imediatamente. Lidamos com promises dando a elas um atributo <code>.then</code> descrevendo o que deve ser feito quando obtivermos uma <code>response</code>. O trecho de código abaixo registrará nossa resposta no console.</p>

<pre><code>document.addEventListener('DOMContentLoaded', function() {
    // Enviar uma requisição GET para a URL
    fetch('https://api.exchangeratesapi.io/latest?base=USD')
    // Colocar resposta em forma json
    .then(response =&gt; response.json())
    .then(data =&gt; {
        // Registrar dados no console
        console.log(data);
    });
});
</code></pre>

<p><img src="static5/curr_log.png" alt="Registro de Moeda"></p>

<p>Um ponto importante sobre o código acima é que o argumento de <code>.then</code> é sempre uma função. Embora pareça que estamos criando as variáveis <code>response</code> e <code>data</code>, essas variáveis são apenas os parâmetros de duas funções anônimas.</p>

<p>Ao invés de simplesmente registrar esses dados, podemos usar JavaScript para mostrar uma mensagem na tela, como no código abaixo:</p>

<pre><code>document.addEventListener('DOMContentLoaded', function() {
    // Enviar uma requisição GET para a URL
    fetch('https://api.exchangeratesapi.io/latest?base=USD')
    // Colocar resposta em forma json
    .then(response =&gt; response.json())
    .then(data =&gt; {
        // Obter moeda do input do usuário e converter para maiúsculas
        const moeda = document.querySelector('#moeda').value.toUpperCase();

        // Obter taxa dos dados
        const taxa = data.rates[moeda];

        // Verificar se a moeda é válida:
        if (taxa !== undefined) {
            // Mostrar câmbio na tela
            document.querySelector('#resultado').innerHTML = `1 USD é igual a ${taxa.toFixed(3)} ${moeda}.`;
        }
        else {
            // Mostrar erro na tela
            document.querySelector('#resultado').innerHTML = 'Moeda Inválida.';
        }
    })
    // Capturar quaisquer erros e registrá-los no console
    .catch(error =&gt; {
        console.log('Erro:', error);
    });
    // Prevenir envio padrão
    return false;
    }
});
</code></pre>

<p><img src="static5/exchange.gif" alt="Demonstração de Câmbio"></p>

<p>Isso é tudo para esta aula! Na próxima, trabalharemos em usar JavaScript para criar interfaces de usuário ainda mais engajadoras!</p>

</body>
</html>